---
layout: three-column
title: 搜尋
permalink: /search.html
classes: search-page three-column
---

<!-- 三欄式布局 -->
<div class="three-column-container">
  <!-- 左欄：搜尋導航 -->
  <aside class="left-sidebar">
    <div class="sidebar-content">
      <div class="nav-card">
        <h3 class="sidebar-title">🔍 搜尋助手</h3>
        <div class="search-tips">
          <h4>搜尋技巧</h4>
          <ul class="tips-list">
            <li>輸入關鍵字搜尋標題和內容</li>
            <li>使用標籤名稱精確搜尋</li>
            <li>支援中英文混合搜尋</li>
          </ul>
        </div>
        
        <div class="quick-search">
          <h4>快速搜尋</h4>
          <div class="suggestion-tags">
            <span class="suggestion-tag" data-search="Python">Python</span>
            <span class="suggestion-tag" data-search="JavaScript">JavaScript</span>
            <span class="suggestion-tag" data-search="Jekyll">Jekyll</span>
            <span class="suggestion-tag" data-search="資安">資安</span>
            <span class="suggestion-tag" data-search="教學">教學</span>
            <span class="suggestion-tag" data-search="工具">工具</span>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- 中欄：搜尋內容 -->
  <main class="main-content">
    <!-- 搜尋標題區域 -->
    <header class="page-header">
      <h1 class="page-title">🔍 搜尋文章</h1>
      <p class="page-description">在所有文章中快速找到您需要的內容</p>
    </header>

    <!-- 搜尋輸入區域 -->
    <section class="search-section">
      <div class="search-container">
        <div class="search-input-wrapper">
          <div class="search-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
              <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <input 
            id="search-input" 
            type="search" 
            placeholder="搜尋文章標題、內容、標籤..." 
            aria-label="Search"
            autocomplete="off"
          />
          <div id="search-clear" class="search-clear" title="清除搜尋">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- 搜尋狀態顯示 -->
    <div id="search-status" class="search-status"></div>

    <!-- 搜尋結果區域 -->
    <section id="search-results" class="search-results">
      <!-- 預設顯示最新文章 -->
      <div id="default-content" class="default-content">
        <h2>📚 最新文章</h2>
        <div class="articles-grid">
          {% assign latest_posts = site.posts | sort: 'date' | reverse | limit: 6 %}
          {% for post in latest_posts %}
            <article class="article-card">
              <div class="article-content">
                <div class="article-header">
                  <h3 class="article-title">
                    <a href="{{ post.url }}">{{ post.title }}</a>
                  </h3>
                  <div class="article-meta">
                    <span class="article-date">📅 {{ post.date | date: "%Y-%m-%d" }}</span>
                    {% if post.categories %}
                      <span class="article-category">{{ post.categories | first }}</span>
                    {% endif %}
                  </div>
                </div>
                
                <div class="article-excerpt">
                  {% if post.excerpt %}
                    {{ post.excerpt | strip_html | truncate: 120 }}
                  {% else %}
                    {{ post.content | strip_html | truncate: 120 }}
                  {% endif %}
                </div>
                
                <div class="article-footer">
                  {% if post.tags %}
                    <div class="article-tags">
                      {% for tag in post.tags limit: 3 %}
                        <span class="article-tag">{{ tag }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <a href="{{ post.url }}" class="btn btn-outline">閱讀更多</a>
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      </div>

      <!-- 動態搜尋結果會在這裡顯示 -->
      <div id="results-container" style="display: none;">
        <div id="results-content"></div>
      </div>
    </section>
  </main>

  <!-- 右欄：快速導航 -->
  <aside class="right-sidebar">
    <div class="sidebar-content">
      <!-- 個人資訊卡片 -->
      <div class="info-card security-researcher-card">
        <div class="profile-section">
          <img src="/assets/image/logo_inverted.png" alt="YoFat" class="profile-avatar">
          <h3 class="profile-name">YoFat</h3>
          <p class="profile-title">Security Researcher</p>
        </div>
      </div>

      <!-- 快速導航 -->
      <div class="info-card">
        <h3 class="sidebar-title">🚀 快速導航</h3>
        <div class="quick-nav">
          <a href="/" class="nav-link">
            <span>🏠</span>
            <span>首頁</span>
          </a>
          <a href="/categories.html" class="nav-link">
            <span>📂</span>
            <span>分類</span>
          </a>
          <a href="/tags.html" class="nav-link">
            <span>🏷️</span>
            <span>標籤</span>
          </a>
          <a href="/posts.html" class="nav-link">
            <span>📰</span>
            <span>全部文章</span>
          </a>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- 搜尋數據（JSON格式，供JavaScript使用） -->
<script type="application/json" id="search-data">
{
  "posts": [
    {% for post in site.posts %}
      {
        "title": {{ post.title | jsonify }},
        "url": {{ post.url | jsonify }},
        "content": {{ post.content | strip_html | jsonify }},
        "excerpt": {{ post.excerpt | strip_html | jsonify }},
        "date": {{ post.date | date: "%Y-%m-%d" | jsonify }},
        "categories": {{ post.categories | jsonify }},
        "tags": {{ post.tags | jsonify }}
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 搜尋數據
  const searchData = JSON.parse(document.getElementById('search-data').textContent);
  const searchInput = document.getElementById('search-input');
  const searchClear = document.getElementById('search-clear');
  const searchStatus = document.getElementById('search-status');
  const resultsContainer = document.getElementById('results-container');
  const resultsContent = document.getElementById('results-content');
  const defaultContent = document.getElementById('default-content');

  // 搜尋功能
  function performSearch(query) {
    if (!query.trim()) {
      showDefaultContent();
      return;
    }

    const results = searchData.posts.filter(post => {
      const searchText = (post.title + ' ' + post.content + ' ' + post.tags.join(' ')).toLowerCase();
      return searchText.includes(query.toLowerCase());
    });

    displayResults(results, query);
  }

  function displayResults(results, query) {
    defaultContent.style.display = 'none';
    resultsContainer.style.display = 'block';

    if (results.length === 0) {
      searchStatus.innerHTML = `<p>找不到包含 "<strong>${query}</strong>" 的文章</p>`;
      resultsContent.innerHTML = '';
      return;
    }

    searchStatus.innerHTML = `<p>找到 <strong>${results.length}</strong> 篇包含 "<strong>${query}</strong>" 的文章</p>`;

    let html = '<div class="articles-grid">';
    results.forEach(post => {
      html += `
        <article class="article-card">
          <div class="article-content">
            <div class="article-header">
              <h3 class="article-title">
                <a href="${post.url}">${post.title}</a>
              </h3>
              <div class="article-meta">
                <span class="article-date">📅 ${post.date}</span>
                ${post.categories.length > 0 ? `<span class="article-category">${post.categories[0]}</span>` : ''}
              </div>
            </div>
            <div class="article-excerpt">
              ${post.excerpt ? post.excerpt.substring(0, 120) + '...' : ''}
            </div>
            <div class="article-footer">
              ${post.tags.length > 0 ? `
                <div class="article-tags">
                  ${post.tags.slice(0, 3).map(tag => `<span class="article-tag">${tag}</span>`).join('')}
                </div>
              ` : ''}
              <a href="${post.url}" class="btn btn-outline">閱讀更多</a>
            </div>
          </div>
        </article>
      `;
    });
    html += '</div>';
    resultsContent.innerHTML = html;
  }

  function showDefaultContent() {
    defaultContent.style.display = 'block';
    resultsContainer.style.display = 'none';
    searchStatus.innerHTML = '';
  }

  // 搜尋輸入事件
  searchInput.addEventListener('input', function() {
    const query = this.value.trim();
    if (query) {
      searchClear.style.display = 'block';
    } else {
      searchClear.style.display = 'none';
    }
    
    // 防抖處理
    clearTimeout(this.searchTimeout);
    this.searchTimeout = setTimeout(() => {
      performSearch(query);
    }, 300);
  });

  // 清除搜尋
  searchClear.addEventListener('click', function() {
    searchInput.value = '';
    this.style.display = 'none';
    showDefaultContent();
    searchInput.focus();
  });

  // 快速搜尋標籤
  document.querySelectorAll('.suggestion-tag').forEach(tag => {
    tag.addEventListener('click', function() {
      const searchTerm = this.getAttribute('data-search');
      searchInput.value = searchTerm;
      searchClear.style.display = 'block';
      performSearch(searchTerm);
    });
  });

  // 初始狀態
  showDefaultContent();
});
</script>
---
layout: three-column
title: æœå°‹
permalink: /search.html
classes: search-page three-column
---

<!-- ä¸‰æ¬„å¼å¸ƒå±€ -->
<div class="three-column-container">
  <!-- å·¦æ¬„ï¼šæœå°‹å°èˆª -->
  <aside class="left-sidebar">
    <div class="sidebar-content">
      <div class="nav-card">
        <h3 class="sidebar-title">ğŸ” æœå°‹åŠ©æ‰‹</h3>
        <div class="search-tips">
          <h4>æœå°‹æŠ€å·§</h4>
          <ul class="tips-list">
            <li>è¼¸å…¥é—œéµå­—æœå°‹æ¨™é¡Œå’Œå…§å®¹</li>
            <li>ä½¿ç”¨æ¨™ç±¤åç¨±ç²¾ç¢ºæœå°‹</li>
            <li>æ”¯æ´ä¸­è‹±æ–‡æ··åˆæœå°‹</li>
          </ul>
        </div>
        
        <div class="quick-search">
          <h4>å¿«é€Ÿæœå°‹</h4>
          <div class="suggestion-tags">
            <span class="suggestion-tag" data-search="Python">Python</span>
            <span class="suggestion-tag" data-search="JavaScript">JavaScript</span>
            <span class="suggestion-tag" data-search="Jekyll">Jekyll</span>
            <span class="suggestion-tag" data-search="è³‡å®‰">è³‡å®‰</span>
            <span class="suggestion-tag" data-search="æ•™å­¸">æ•™å­¸</span>
            <span class="suggestion-tag" data-search="å·¥å…·">å·¥å…·</span>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- ä¸­æ¬„ï¼šæœå°‹å…§å®¹ -->
  <main class="main-content">
    <!-- æœå°‹æ¨™é¡Œå€åŸŸ -->
    <header class="page-header">
      <h1 class="page-title">ğŸ” æœå°‹æ–‡ç« </h1>
      <p class="page-description">åœ¨æ‰€æœ‰æ–‡ç« ä¸­å¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„å…§å®¹</p>
    </header>

    <!-- æœå°‹è¼¸å…¥å€åŸŸ -->
    <section class="search-section">
      <div class="search-container">
        <div class="search-input-wrapper">
          <div class="search-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
              <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <input 
            id="search-input" 
            type="search" 
            placeholder="æœå°‹æ–‡ç« æ¨™é¡Œã€å…§å®¹ã€æ¨™ç±¤..." 
            aria-label="Search"
            autocomplete="off"
          />
          <div id="search-clear" class="search-clear" title="æ¸…é™¤æœå°‹">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- æœå°‹ç‹€æ…‹é¡¯ç¤º -->
    <div id="search-status" class="search-status"></div>

    <!-- æœå°‹çµæœå€åŸŸ -->
    <section id="search-results" class="search-results">
      <!-- é è¨­é¡¯ç¤ºæœ€æ–°æ–‡ç«  -->
      <div id="default-content" class="default-content">
        <h2>ğŸ“š æœ€æ–°æ–‡ç« </h2>
        <div class="articles-grid">
          {% assign latest_posts = site.posts | sort: 'date' | reverse | limit: 6 %}
          {% for post in latest_posts %}
            <article class="article-card">
              <div class="article-content">
                <div class="article-header">
                  <h3 class="article-title">
                    <a href="{{ post.url }}">{{ post.title }}</a>
                  </h3>
                  <div class="article-meta">
                    <span class="article-date">ğŸ“… {{ post.date | date: "%Y-%m-%d" }}</span>
                    {% if post.categories %}
                      <span class="article-category">{{ post.categories | first }}</span>
                    {% endif %}
                  </div>
                </div>
                
                <div class="article-excerpt">
                  {% if post.excerpt %}
                    {{ post.excerpt | strip_html | truncate: 120 }}
                  {% else %}
                    {{ post.content | strip_html | truncate: 120 }}
                  {% endif %}
                </div>
                
                <div class="article-footer">
                  {% if post.tags %}
                    <div class="article-tags">
                      {% for tag in post.tags limit: 3 %}
                        <span class="article-tag">{{ tag }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <a href="{{ post.url }}" class="btn btn-outline">é–±è®€æ›´å¤š</a>
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      </div>

      <!-- å‹•æ…‹æœå°‹çµæœæœƒåœ¨é€™è£¡é¡¯ç¤º -->
      <div id="results-container" style="display: none;">
        <div id="results-content"></div>
      </div>
    </section>
  </main>

  <!-- å³æ¬„ï¼šå¿«é€Ÿå°èˆª -->
  <aside class="right-sidebar">
    <div class="sidebar-content">
      <!-- å€‹äººè³‡è¨Šå¡ç‰‡ -->
      <div class="info-card security-researcher-card">
        <div class="profile-section">
          <img src="/assets/image/logo_inverted.png" alt="YoFat" class="profile-avatar">
          <h3 class="profile-name">YoFat</h3>
          <p class="profile-title">Security Researcher</p>
        </div>
      </div>

      <!-- å¿«é€Ÿå°èˆª -->
      <div class="info-card">
        <h3 class="sidebar-title">ğŸš€ å¿«é€Ÿå°èˆª</h3>
        <div class="quick-nav">
          <a href="/" class="nav-link">
            <span>ğŸ </span>
            <span>é¦–é </span>
          </a>
          <a href="/categories.html" class="nav-link">
            <span>ğŸ“‚</span>
            <span>åˆ†é¡</span>
          </a>
          <a href="/tags.html" class="nav-link">
            <span>ğŸ·ï¸</span>
            <span>æ¨™ç±¤</span>
          </a>
          <a href="/posts.html" class="nav-link">
            <span>ğŸ“°</span>
            <span>å…¨éƒ¨æ–‡ç« </span>
          </a>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- æœå°‹æ•¸æ“šï¼ˆJSONæ ¼å¼ï¼Œä¾›JavaScriptä½¿ç”¨ï¼‰ -->
<script type="application/json" id="search-data">
{
  "posts": [
    {% for post in site.posts %}
      {
        "title": {{ post.title | jsonify }},
        "url": {{ post.url | jsonify }},
        "content": {{ post.content | strip_html | jsonify }},
        "excerpt": {{ post.excerpt | strip_html | jsonify }},
        "date": {{ post.date | date: "%Y-%m-%d" | jsonify }},
        "categories": {{ post.categories | jsonify }},
        "tags": {{ post.tags | jsonify }}
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // æœå°‹æ•¸æ“š
  const searchData = JSON.parse(document.getElementById('search-data').textContent);
  const searchInput = document.getElementById('search-input');
  const searchClear = document.getElementById('search-clear');
  const searchStatus = document.getElementById('search-status');
  const resultsContainer = document.getElementById('results-container');
  const resultsContent = document.getElementById('results-content');
  const defaultContent = document.getElementById('default-content');

  // æœå°‹åŠŸèƒ½
  function performSearch(query) {
    if (!query.trim()) {
      showDefaultContent();
      return;
    }

    const results = searchData.posts.filter(post => {
      const searchText = (post.title + ' ' + post.content + ' ' + post.tags.join(' ')).toLowerCase();
      return searchText.includes(query.toLowerCase());
    });

    displayResults(results, query);
  }

  function displayResults(results, query) {
    defaultContent.style.display = 'none';
    resultsContainer.style.display = 'block';

    if (results.length === 0) {
      searchStatus.innerHTML = `<p>æ‰¾ä¸åˆ°åŒ…å« "<strong>${query}</strong>" çš„æ–‡ç« </p>`;
      resultsContent.innerHTML = '';
      return;
    }

    searchStatus.innerHTML = `<p>æ‰¾åˆ° <strong>${results.length}</strong> ç¯‡åŒ…å« "<strong>${query}</strong>" çš„æ–‡ç« </p>`;

    let html = '<div class="articles-grid">';
    results.forEach(post => {
      html += `
        <article class="article-card">
          <div class="article-content">
            <div class="article-header">
              <h3 class="article-title">
                <a href="${post.url}">${post.title}</a>
              </h3>
              <div class="article-meta">
                <span class="article-date">ğŸ“… ${post.date}</span>
                ${post.categories.length > 0 ? `<span class="article-category">${post.categories[0]}</span>` : ''}
              </div>
            </div>
            <div class="article-excerpt">
              ${post.excerpt ? post.excerpt.substring(0, 120) + '...' : ''}
            </div>
            <div class="article-footer">
              ${post.tags.length > 0 ? `
                <div class="article-tags">
                  ${post.tags.slice(0, 3).map(tag => `<span class="article-tag">${tag}</span>`).join('')}
                </div>
              ` : ''}
              <a href="${post.url}" class="btn btn-outline">é–±è®€æ›´å¤š</a>
            </div>
          </div>
        </article>
      `;
    });
    html += '</div>';
    resultsContent.innerHTML = html;
  }

  function showDefaultContent() {
    defaultContent.style.display = 'block';
    resultsContainer.style.display = 'none';
    searchStatus.innerHTML = '';
  }

  // æœå°‹è¼¸å…¥äº‹ä»¶
  searchInput.addEventListener('input', function() {
    const query = this.value.trim();
    if (query) {
      searchClear.style.display = 'block';
    } else {
      searchClear.style.display = 'none';
    }
    
    // é˜²æŠ–è™•ç†
    clearTimeout(this.searchTimeout);
    this.searchTimeout = setTimeout(() => {
      performSearch(query);
    }, 300);
  });

  // æ¸…é™¤æœå°‹
  searchClear.addEventListener('click', function() {
    searchInput.value = '';
    this.style.display = 'none';
    showDefaultContent();
    searchInput.focus();
  });

  // å¿«é€Ÿæœå°‹æ¨™ç±¤
  document.querySelectorAll('.suggestion-tag').forEach(tag => {
    tag.addEventListener('click', function() {
      const searchTerm = this.getAttribute('data-search');
      searchInput.value = searchTerm;
      searchClear.style.display = 'block';
      performSearch(searchTerm);
    });
  });

  // åˆå§‹ç‹€æ…‹
  showDefaultContent();
});
</script>
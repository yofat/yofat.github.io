---
layout: default
classes: home
---

{%- comment -%}
å…ˆè¨ˆç®—å­—æ•¸ï¼ˆç„¡éœ€ pluginï¼‰ï¼šå» HTMLã€å£“ç©ºç™½ã€split ç©ºç™½ï¼Œå†å– size
{%- endcomment -%}
{% assign words = page.content | strip_html | normalize_whitespace | split: ' ' %}

<div class="grid-3col content-root">
  <!-- å·¦æ¬„ï¼šTOC ç›®éŒ„ -->
  <aside class="toc">
    <h3>ç›®éŒ„</h3>
    <nav id="toc">
      <!-- JavaScript æœƒå‹•æ…‹ç”Ÿæˆç›®éŒ„ -->
    </nav>
  </aside>

  <!-- ä¸­æ¬„ï¼šä¸»è¦å…§å®¹ -->
  <div class="maincol">
    <article class="post-article" data-count-key="post:{{ page.id | replace: '/', ':' }}">
    <header class="post-header">
      <h1>{{ page.title }}</h1>
      <div class="post-meta">
        <span class="post-date">ğŸ“… {{ page.date | date: "%Y-%m-%d" }}</span>

        {% if page.categories %}
          <span class="post-categories">
            ğŸ“ åˆ†é¡ï¼š
            {% for c in page.categories %}
              <a href="{{ '/categories.html#' | append: c | relative_url }}">{{ c }}</a>{% unless forloop.last %} / {% endunless %}
            {% endfor %}
          </span>
        {% endif %}

        {% if page.tags %}
          <span class="post-tags">
            ğŸ·ï¸ æ¨™ç±¤ï¼š
            {% for t in page.tags %}
              <a href="{{ '/tags.html#' | append: t | slugify | relative_url }}">{{ t }}</a>{% unless forloop.last %} / {% endunless %}
            {% endfor %}
          </span>
        {% endif %}

        <span class="reading-time">â±ï¸ é–±è®€æ™‚é–“ï¼šç´„ {{ words | size | divided_by:200 | ceil }} åˆ†é˜</span>
      </div>
    </header>

    <div class="post-content">
      {{ content }}
    </div>

    <footer class="post-footer">
      <div class="post-views">
        <strong>ğŸ‘ï¸ ç€è¦½æ•¸ï¼š</strong><span id="view-count">â€¦</span>
      </div>
    </footer>
    </article>
  </div>

  <!-- å³æ¬„ï¼šå´é‚Šè³‡è¨Š -->
  <aside class="siderail">
    <div class="card">
      <div class="card-title">ğŸ“ˆ é–±è®€é€²åº¦</div>
      <div class="reading-progress">
        <div class="progress-bar" id="reading-progress"></div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-title">ğŸ”— å¿«é€Ÿå°èˆª</div>
      <div class="pill-group">
        <a class="pill" href="{{ '/' | relative_url }}">ğŸ  é¦–é </a>
        <a class="pill" href="{{ '/categories.html' | relative_url }}">ğŸ“‚ åˆ†é¡</a>
        <a class="pill" href="{{ '/tags.html' | relative_url }}">ğŸ·ï¸ æ¨™ç±¤</a>
        <a class="pill" href="{{ '/search.html' | relative_url }}">ğŸ” æœå°‹</a>
      </div>
    </div>

    {% if page.categories %}
    <div class="card">
      <div class="card-title">ğŸ“‚ ç›¸åŒåˆ†é¡</div>
      {% assign category = page.categories.first %}
      {% assign related_posts = site.categories[category] | where_exp: "post", "post.url != page.url" | slice: 0, 5 %}
      {% for post in related_posts %}
        <p><a href="{{ post.url | relative_url }}">{{ post.title }}</a></p>
        <small class="muted">{{ post.date | date: "%m-%d" }}</small>
      {% endfor %}
    </div>
    {% endif %}

    {% if page.tags %}
    <div class="card">
      <div class="card-title">ğŸ·ï¸ ç›¸é—œæ¨™ç±¤</div>
      <div class="pill-group">
        {% for tag in page.tags %}
          <a class="pill ghost" href="{{ '/tags.html#' | append: tag | relative_url }}">{{ tag }}</a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </aside>
</div>

<script>
// ç”Ÿæˆç›®éŒ„ - HackMD é¢¨æ ¼
document.addEventListener('DOMContentLoaded', function() {
  const toc = document.getElementById('toc');
  const headings = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4');
  
  if (headings.length === 0) {
    document.querySelector('.toc').style.display = 'none';
    return;
  }
  
  let tocHTML = '<ul>';
  headings.forEach((heading, index) => {
    const id = `heading-${index}`;
    heading.id = id;
    
    const level = parseInt(heading.tagName.substring(1));
    const text = heading.textContent.trim();
    
    tocHTML += `
      <li>
        <a href="#${id}" class="toc-link" data-level="${level}">
          ${text}
        </a>
      </li>
    `;
  });
  tocHTML += '</ul>';
  
  toc.innerHTML = tocHTML;
  
  // é–±è®€é€²åº¦
  const progressBar = document.getElementById('reading-progress');
  window.addEventListener('scroll', function() {
    const post = document.querySelector('.post-content');
    const postTop = post.offsetTop;
    const postHeight = post.offsetHeight;
    const windowTop = window.scrollY;
    const windowHeight = window.innerHeight;
    
    const progress = Math.min(100, Math.max(0, 
      ((windowTop + windowHeight - postTop) / postHeight) * 100
    ));
    
    progressBar.style.width = progress + '%';
  });
  
  // TOC é«˜äº®ç•¶å‰ç« ç¯€
  const tocLinks = document.querySelectorAll('.toc-link');
  window.addEventListener('scroll', function() {
    let current = '';
    headings.forEach(heading => {
      const rect = heading.getBoundingClientRect();
      if (rect.top <= 100) {
        current = heading.id;
      }
    });
    
    tocLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === '#' + current) {
        link.classList.add('active');
      }
    });
  });
  
});
  
  if (!toc || !icon) return;
</script>

<!-- ä»£ç¢¼å¡Šå¢å¼·åŠŸèƒ½ -->
<script src="{{ '/assets/js/code-blocks.js' | relative_url }}"></script>

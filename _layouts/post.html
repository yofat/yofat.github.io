---
layout: default
classes: grid-page
---

{%- comment -%}
æ–‡ç« æ¨¡æ¿ - æŠ•å½±ç‰‡æ¯ç‰‡é¢¨æ ¼
åªéœ€åœ¨ _posts/ ä¸­æä¾› Markdown æª”æ¡ˆï¼Œè‡ªå‹•å¥—ç”¨çµ±ä¸€è¨­è¨ˆ
{%- endcomment -%}

{% assign words = page.content | strip_html | normalize_whitespace | split: ' ' %}
{% assign reading_time = words.size | divided_by: 200 | ceil %}

<div class="grid-3col content-root">
  <!-- å·¦æ¬„ï¼šHackMD é¢¨æ ¼ TOC -->
  <aside class="toc">
    <h3>å¤§ç¶±</h3>
    <nav id="toc">
      <!-- JavaScript æœƒæ ¹æ“šæ–‡ç« æ¨™é¡Œè‡ªå‹•ç”Ÿæˆ -->
    </nav>
  </aside>

  <!-- ä¸­æ¬„ï¼šæ–‡ç« å…§å®¹ -->
  <div class="maincol">
    <article class="post-article" data-count-key="post:{{ page.id | replace: '/', ':' }}">
      <!-- æ–‡ç« æ¨™é¡Œå€ -->
      <header class="article-header">
        <h1 class="article-title">{{ page.title }}</h1>
        
        <div class="article-meta">
          <div class="meta-row">
            <span class="meta-item">
              <i>ğŸ“…</i>
              <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%Yå¹´%mæœˆ%dæ—¥" }}</time>
            </span>
            
            <span class="meta-item">
              <i>â±ï¸</i>
              <span>ç´„ {{ reading_time }} åˆ†é˜é–±è®€</span>
            </span>
            
            <span class="meta-item">
              <i>ğŸ‘ï¸</i>
              <span id="view-count">è¼‰å…¥ä¸­...</span> æ¬¡ç€è¦½
            </span>
          </div>
          
          {% if page.categories or page.tags %}
          <div class="meta-row">
            {% if page.categories %}
              <div class="meta-group">
                <span class="meta-label">ï¿½ åˆ†é¡</span>
                {% for category in page.categories %}
                  <a href="{{ '/categories.html#' | append: category | relative_url }}" class="meta-tag category-tag">{{ category }}</a>
                {% endfor %}
              </div>
            {% endif %}
            
            {% if page.tags %}
              <div class="meta-group">
                <span class="meta-label">ğŸ·ï¸ æ¨™ç±¤</span>
                {% for tag in page.tags %}
                  <a href="{{ '/tags.html#' | append: tag | relative_url }}" class="meta-tag tag-tag">{{ tag }}</a>
                {% endfor %}
              </div>
            {% endif %}
          </div>
          {% endif %}
        </div>
        
        {% if page.description %}
        <div class="article-description">
          <p>{{ page.description }}</p>
        </div>
        {% endif %}
      </header>

      <!-- æ–‡ç« å…§å®¹ -->
      <div class="article-content">
        {{ content }}
      </div>

      <!-- æ–‡ç« çµå°¾è³‡è¨Š -->
      <footer class="article-footer">
        <div class="article-end-line"></div>
        
        {% if page.updated %}
        <div class="updated-info">
          <small>ï¿½ æœ€å¾Œæ›´æ–°ï¼š{{ page.updated | date: "%Yå¹´%mæœˆ%dæ—¥" }}</small>
        </div>
        {% endif %}
        
        <div class="article-share">
          <span>è¦ºå¾—æœ‰å¹«åŠ©å—ï¼Ÿåˆ†äº«çµ¦æ›´å¤šäººï¼š</span>
          <div class="share-buttons">
            <a href="javascript:void(0)" onclick="copyToClipboard()" class="share-btn">ğŸ“‹ è¤‡è£½é€£çµ</a>
          </div>
        </div>
      </footer>
    </article>
  </div>

  <!-- å³æ¬„ï¼šäº’å‹•å·¥å…· -->
  <aside class="siderail">
    <!-- é–±è®€é€²åº¦ -->
    <div class="card">
      <div class="card-title">ï¿½ é–±è®€é€²åº¦</div>
      <div class="progress-container">
        <div class="progress-bar" id="reading-progress"></div>
        <span class="progress-text" id="progress-text">0%</span>
      </div>
    </div>
    
    <!-- å¿«é€Ÿå‹•ä½œ -->
    <div class="card">
      <div class="card-title">âš¡ å¿«é€Ÿå‹•ä½œ</div>
      <div class="action-buttons">
        <button class="action-btn" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â¬†ï¸ å›é ‚éƒ¨</button>
        <button class="action-btn" onclick="copyToClipboard()">ğŸ”— è¤‡è£½é€£çµ</button>
        <button class="action-btn" onclick="window.print()">ï¿½ï¸ åˆ—å°</button>
      </div>
    </div>

    <!-- ç›¸é—œæ–‡ç« ï¼ˆå¦‚æœæœ‰åˆ†é¡ï¼‰ -->
    {% if page.categories %}
      {% assign category = page.categories.first %}
      {% assign related_posts = site.categories[category] | where_exp: "post", "post.url != page.url" | slice: 0, 3 %}
      {% if related_posts.size > 0 %}
      <div class="card">
        <div class="card-title">ï¿½ {{ category }}ç›¸é—œ</div>
        {% for post in related_posts %}
          <div class="related-post">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
            <small class="post-date muted">ğŸ“… {{ post.date | date: "%mæœˆ%dæ—¥" }}</small>
          </div>
        {% endfor %}
      </div>
      {% endif %}
    {% endif %}

    <!-- å°èˆªé€£çµ -->
    <div class="card">
      <div class="card-title">ğŸ§­ ç«™å…§å°èˆª</div>
      <div class="pill-group">
        <a class="pill" href="{{ '/' | relative_url }}">ğŸ  é¦–é </a>
        <a class="pill" href="{{ '/categories.html' | relative_url }}">ğŸ“‚ åˆ†é¡</a>
        <a class="pill" href="{{ '/tags.html' | relative_url }}">ğŸ·ï¸ æ¨™ç±¤</a>
        <a class="pill" href="{{ '/search.html' | relative_url }}">ğŸ” æœå°‹</a>
      </div>
    </div>
  </aside>
</div>

<script>
// æ–‡ç« é é¢åŠŸèƒ½
document.addEventListener('DOMContentLoaded', function() {
  
  // è¤‡è£½é€£çµåŠŸèƒ½
  window.copyToClipboard = function() {
    navigator.clipboard.writeText(window.location.href).then(() => {
      // ç°¡å–®çš„æç¤ºæ•ˆæœ
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = 'âœ… å·²è¤‡è£½';
      setTimeout(() => btn.textContent = originalText, 2000);
    });
  };
  
  // åˆå§‹åŒ–é–±è®€é€²åº¦æ¢
  function initReadingProgress() {
    const progressBar = document.getElementById('reading-progress');
    const progressText = document.getElementById('progress-text');
    
    if (!progressBar) return;
    
    function updateProgress() {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = Math.min(Math.round((scrollTop / docHeight) * 100), 100);
      
      progressBar.style.width = scrollPercent + '%';
      if (progressText) progressText.textContent = scrollPercent + '%';
    }
    
    // åˆå§‹åŒ–å’Œäº‹ä»¶ç›£è½
    updateProgress();
    window.addEventListener('scroll', updateProgress, { passive: true });
    window.addEventListener('resize', updateProgress);
  }
  
  // å»¶é²åˆå§‹åŒ–é¿å…å¸ƒå±€å•é¡Œ
  setTimeout(initReadingProgress, 100);
});
</script>

<!-- ä»£ç¢¼å¡Šå¢å¼·åŠŸèƒ½ -->
<script src="{{ '/assets/js/code-blocks.js' | relative_url }}"></script>

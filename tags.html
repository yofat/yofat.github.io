---
layout: three-column
title: 標籤
permalink: /tags.html
classes: tags-page three-column
---

<!-- 三欄式布局 -->
<div class="three-column-layout with-border">
  <!-- 左欄：標籤導航 -->
  <aside class="left-sidebar">
    <div class="sidebar-content">
      <div class="nav-card">
        <h3 class="sidebar-title">🗺️ 標籤導航</h3>
        <div class="tags-filter">
          <input type="text" id="tag-search" placeholder="搜尋標籤..." class="search-input">
        </div>
        
        <nav id="tags-nav" class="toc-nav">
          {% assign all_tags = site.articles | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
          {% for tag in all_tags %}
            {% unless tag == blank %}
              {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
              <a href="#{{ tag | slugify }}" class="toc-link tag-nav-link" data-count="{{ tag_posts.size }}">
                <span class="tag-name">{{ tag }}</span>
                <span class="tag-count">{{ tag_posts.size }}</span>
              </a>
            {% endunless %}
          {% endfor %}
        </nav>
      </div>
    </div>
  </aside>

  <!-- 中欄：標籤雲與內容 -->
  <main class="main-content">
    <!-- 頁面標題 -->
    <header class="page-header">
      <h1 class="page-title">🏷️ 文章標籤</h1>
      <p class="page-description">按標籤分類的文章內容</p>
    </header>

    <!-- 標籤雲區域 -->
    <section class="tags-cloud-section card">
      <h2 class="section-title">🌐 標籤雲圖</h2>
      <p class="section-description">點擊標籤查看相關文章</p>
      
      <div class="tags-cloud-container">
        {% assign all_tags = site.articles | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
        {% for tag in all_tags %}
          {% unless tag == blank %}
            {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
            {% assign tag_size = tag_posts.size %}
            {% if tag_size > 8 %}
              {% assign tag_class = 'tag-xl' %}
            {% elsif tag_size > 5 %}
              {% assign tag_class = 'tag-lg' %}
            {% elsif tag_size > 3 %}
              {% assign tag_class = 'tag-md' %}
            {% elsif tag_size > 1 %}
              {% assign tag_class = 'tag-sm' %}
            {% else %}
              {% assign tag_class = 'tag-xs' %}
            {% endif %}
            <a href="#{{ tag | slugify }}" class="tag-cloud-item {{ tag_class }}" data-count="{{ tag_size }}">
              <span class="tag-text">{{ tag }}</span>
              <span class="tag-badge">{{ tag_size }}</span>
            </a>
          {% endunless %}
        {% endfor %}
      </div>
    </section>

    <!-- 標籤內容區域 -->
    <div class="tags-content">
      {% for tag in all_tags %}
        {% unless tag == blank %}
          {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" | sort: 'date' | reverse %}
          {% if tag_posts.size > 0 %}
            <div class="tag-section" id="{{ tag | slugify }}">
              <div class="tag-header">
                <h2 class="tag-title"># {{ tag }}</h2>
                <p class="tag-description">
                  共 {{ tag_posts.size }} 篇相關文章
                </p>
              </div>
              
              <div class="articles-grid">
                {% for post in tag_posts limit: 4 %}
                  <article class="article-card">
                    <div class="article-content">
                      <div class="article-header">
                        <h3 class="article-title">
                          <a href="{{ post.url }}">{{ post.title }}</a>
                        </h3>
                        <div class="article-meta">
                          <span class="article-date">📅 {{ post.date | date: "%Y-%m-%d" }}</span>
                          {% if post.categories %}
                            <span class="article-category">{{ post.categories | first }}</span>
                          {% endif %}
                        </div>
                      </div>
                      
                      <div class="article-excerpt">
                        {% if post.excerpt %}
                          {{ post.excerpt | strip_html | truncate: 100 }}
                        {% else %}
                          {{ post.content | strip_html | truncate: 100 }}
                        {% endif %}
                      </div>
                      
                      <div class="article-footer">
                        {% if post.tags %}
                          <div class="article-tags">
                            {% for tag_item in post.tags limit: 3 %}
                              <span class="article-tag">{{ tag_item }}</span>
                            {% endfor %}
                          </div>
                        {% endif %}
                        <a href="{{ post.url }}" class="btn btn-outline">閱讀更多</a>
                      </div>
                    </div>
                  </article>
                {% endfor %}
              </div>
              
              {% if tag_posts.size > 4 %}
                <div class="show-more-section">
                  <button class="btn btn-secondary show-more-btn" data-tag="{{ tag | slugify }}">
                    顯示更多 {{ tag }} 文章
                  </button>
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% endunless %}
      {% endfor %}
    </div>
  </main>

  <!-- 右欄：側邊欄資訊 -->
  <aside class="right-sidebar">
    <div class="sidebar-content">
      <!-- 個人資訊卡片 -->
      <div class="info-card security-researcher-card">
        <div class="profile-section">
          <img src="/assets/image/logo.jpg" alt="YoFat" class="profile-avatar">
          <h3 class="profile-name">YoFat</h3>
          <p class="profile-title">Security Researcher</p>
        </div>
      </div>

      <!-- 快速跳轉 -->
      <div class="info-card">
        <h3 class="sidebar-title">🔗 快速跳轉</h3>
        <div class="quick-nav">
          <a href="/" class="nav-link">
            <span>🏠</span>
            <span>首頁</span>
          </a>
          <a href="/categories.html" class="nav-link">
            <span>📂</span>
            <span>分類</span>
          </a>
          <a href="/search.html" class="nav-link">
            <span>🔍</span>
            <span>搜尋</span>
          </a>
        </div>
      </div>
    </div>
  </aside>
            <span>🏠</span>
            <span>首頁</span>
          </a>
          <a href="/categories.html" class="nav-link">
            <span>📂</span>
            <span>分類</span>
          </a>
          <a href="/search.html" class="nav-link">
            <span>🔍</span>
            <span>搜尋</span>
          </a>
        </div>
      </div>
    </div>
  </aside>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 標籤搜尋功能
  const searchInput = document.getElementById('tag-search');
  const tagLinks = document.querySelectorAll('.tag-nav-link');
  
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      tagLinks.forEach(link => {
        const tagName = link.querySelector('.tag-name').textContent.toLowerCase();
        if (tagName.includes(searchTerm)) {
          link.style.display = 'flex';
        } else {
          link.style.display = 'none';
        }
      });
    });
  }

  // 標籤導航高亮
  const tagNavLinks = document.querySelectorAll('#tags-nav .toc-link');
  const tagObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        tagNavLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${id}`) {
            link.classList.add('active');
          }
        });
      }
    });
  }, { rootMargin: '-20% 0px -20% 0px' });

  document.querySelectorAll('.tag-section').forEach(section => {
    tagObserver.observe(section);
  });

  // 平滑滾動
  document.querySelectorAll('a[href^="#"]').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href').substring(1);
      const targetElement = document.getElementById(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({ 
          behavior: 'smooth', 
          block: 'start' 
        });
      }
    });
  });

  // 顯示更多功能
  document.querySelectorAll('.show-more-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const tag = this.getAttribute('data-tag');
      alert(`顯示更多 ${tag} 標籤的文章功能待實現`);
    });
  });
});
</script>

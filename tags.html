---
layout: default
title: æ¨™ç±¤
permalink: /tags.html
classes: home
---

<div class="grid-3col content-root">
  <!-- å·¦æ¬„ï¼šTOC å°èˆª -->
  <aside class="toc">
    <h3>å¿«é€Ÿå°èˆª</h3>
    <nav id="toc">
      <a href="#top" class="toc-link" data-level="1">å›åˆ°é ‚éƒ¨</a>
      {% for big in site.data.tags %}
        {% assign bigtag = big[0] %}
        <a href="#{{ bigtag }}" class="toc-link" data-level="1">{{ bigtag }}</a>
        {% for smalltag in big[1] %}
          <a href="#{{ smalltag }}" class="toc-link" data-level="2">{{ smalltag }}</a>
        {% endfor %}
      {% endfor %}
    </nav>
  </aside>

  <!-- ä¸­æ¬„ï¼šä¸»è¦å…§å®¹ -->
  <div class="maincol">
    <section class="section">
      <h1 id="top">æ¨™ç±¤</h1>
      <p class="muted">ğŸ“‚ æ¢ç´¢æ‰€æœ‰æ¨™ç±¤åˆ†é¡</p>
      {% comment %}
      æ ¹æ“š _data/tags.yml çš„çµæ§‹ï¼Œåˆ—å‡ºæ¯å€‹å¤§é¡èˆ‡å°é¡
      æ–‡ç«  frontmatter ç”¨ tags: [å¤§é¡, å°é¡]
      {% endcomment %}

      {% for big in site.data.tags %}
        {% assign bigtag = big[0] %}
        <section class="tag-section">
          <h2 id="{{ bigtag }}">{{ bigtag }}</h2>
          {% for small in big[1] %}
            <div class="tag-group">
              <h3 id="{{ small }}">{{ small }}</h3>
              <div class="posts-grid">
                {% assign posts_in_big = site.posts | where_exp: "p", "p.tags contains bigtag" %}
                {% assign posts_in_small = posts_in_big | where_exp: "p", "p.tags contains small" %}
                {% if posts_in_small.size == 0 %}
                  <div class="empty-notice">
                    <em>ğŸ” å°šç„¡æ–‡ç« ï¼ŒæœŸå¾…æ‚¨çš„è²¢ç»ï¼</em>
                  </div>
                {% else %}
                  {% for p in posts_in_small %}
                    <article class="post-card">
                      <div class="post-card-content">
                        <h4><a href="{{ p.url | relative_url }}">{{ p.title }}</a></h4>
                        <div class="post-card-meta">
                          <span class="post-date">{{ p.date | date: "%Y-%m-%d" }}</span>
                          {% if p.excerpt %}
                            <p class="post-excerpt">{{ p.excerpt | strip_html | truncatewords: 15 }}</p>
                          {% endif %}
                        </div>
                      </div>
                    </article>
                  {% endfor %}
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </section>
      {% endfor %}

      <div class="back-nav">
        <a href="{{ '/' | relative_url }}" class="back-link">â† è¿”å›é¦–é </a>
      </div>
    </section>
  </div>

  <!-- å³æ¬„ï¼šå´é‚Šè³‡è¨Š -->
  <aside class="siderail">
    <div class="card">
      <div class="card-title">æ¨™ç±¤çµ±è¨ˆ</div>
      <div class="tags-stats">
        {% assign total_tags = 0 %}
        {% for big in site.data.tags %}
          {% assign total_tags = total_tags | plus: big[1].size %}
        {% endfor %}
        <p>ğŸ“Š ç¸½å…± {{ site.data.tags.size }} å€‹å¤§åˆ†é¡</p>
        <p>ğŸ·ï¸ åŒ…å« {{ total_tags }} å€‹å­æ¨™ç±¤</p>
        <p>ğŸ“ å…± {{ site.posts.size }} ç¯‡æ–‡ç« </p>
      </div>
    </div>

    <div class="card">
      <div class="card-title">ç†±é–€æ¨™ç±¤</div>
      <div class="pill-group">
        {% for big in site.data.tags limit: 6 %}
          <a class="pill" href="#{{ big[0] }}">{{ big[0] }}</a>
        {% endfor %}
      </div>
    </div>

    <div class="card">
      <div class="card-title">æœ€æ–°æ–‡ç« </div>
      {% assign latest = site.posts | slice: 0, 3 %}
      {% for post in latest %}
        <p><a href="{{ post.url | relative_url }}">{{ post.title }}</a></p>
        <small class="muted">{{ post.date | date: "%m-%d" }}</small>
      {% endfor %}
    </div>
  </aside>
</div>

<!-- TOC åŠŸèƒ½ -->
<script>
// TOC æ”¶èµ·/å±•é–‹åŠŸèƒ½ (å…¨åŸŸå‡½å¼)
function toggleTOC() {
  const toc = document.getElementById('post-toc');
  const icon = document.getElementById('toc-icon');
  
  if (!toc || !icon) return;
  
  if (toc.classList.contains('collapsed')) {
    toc.classList.remove('collapsed');
    icon.textContent = 'â˜°';
  } else {
    toc.classList.add('collapsed');
    icon.textContent = 'â–¶';
  }
}

// éŸ¿æ‡‰å¼æª¢æŸ¥
function checkScreenWidth() {
  const toc = document.getElementById('post-toc');
  if (window.innerWidth < 1024 && toc) {
    toc.classList.add('collapsed');
    const icon = document.getElementById('toc-icon');
    if (icon) icon.textContent = 'â–¶';
  }
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  checkScreenWidth();
  window.addEventListener('resize', checkScreenWidth);
  
  // TOC éˆæ¥é»æ“Šå¹³æ»‘æ»¾å‹•
  document.querySelectorAll('#tags-toc a').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
});
</script>


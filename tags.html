---
layout: default
title: æ¨™ç±¤
permalink: /tags.html
classes: tags-page
---

<div class="grid-3col content-root">
  <!-- å·¦æ¬„ï¼šæ¨™ç±¤å°èˆª -->
  <aside class="toc">
    <h3>ğŸ—ºï¸ æ¼æ´æ¨™ç±¤å°èˆª</h3>
    <div class="tags-navigation">
      <div class="tags-filter">
        <input type="text" id="tag-search" placeholder="æœå°‹æ¨™ç±¤..." class="search-input">
      </div>
      
      <nav id="tags-nav">
        {% assign all_tags = site.articles | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
        {% for tag in all_tags %}
          {% unless tag == blank %}
            {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
            <a href="#{{ tag | slugify }}" class="tag-nav-link" data-count="{{ tag_posts.size }}">
              <span class="tag-name">{{ tag }}</span>
              <span class="tag-count">{{ tag_posts.size }}</span>
            </a>
          {% endunless %}
        {% endfor %}
      </nav>
    </div>
  </aside>

  <!-- ä¸­æ¬„ï¼šæ¨™ç±¤é›²èˆ‡å…§å®¹ -->
  <div class="maincol">
    <!-- é é¢æ¨™é¡Œ -->
    <header class="page-title">
      <h1 class="glow-red rune-text">ğŸ·ï¸ æ¼æ´æ¨™ç±¤é›²</h1>
      <p class="page-description">æŒ‰æ¨™ç±¤åˆ†é¡çš„å¨è„…æƒ…å ±èˆ‡æ”»æ“ŠæŠ€è¡“</p>
    </header>

    <!-- æ¨™ç±¤é›²å€åŸŸ -->
    <section class="tags-cloud-section card">
      <h2 class="section-title glow-blue">ğŸŒ æ¨™ç±¤é›²åœ–</h2>
      <p class="section-description">é»æ“Šæ¨™ç±¤æŸ¥çœ‹ç›¸é—œå¨è„…æƒ…å ±</p>
      
      <div class="tags-cloud-container">
        {% for tag in all_tags %}
          {% unless tag == blank %}
            {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
            {% assign tag_size = tag_posts.size %}
            {% if tag_size > 8 %}
              {% assign size_class = 'tag-cloud-xxl' %}
            {% elsif tag_size > 5 %}
              {% assign size_class = 'tag-cloud-xl' %}
            {% elsif tag_size > 3 %}
              {% assign size_class = 'tag-cloud-lg' %}
            {% elsif tag_size > 1 %}
              {% assign size_class = 'tag-cloud-md' %}
            {% else %}
              {% assign size_class = 'tag-cloud-sm' %}
            {% endif %}
            <button class="tag-cloud-bubble {{ size_class }}" 
                    data-tag="{{ tag | slugify }}" 
                    data-name="{{ tag | escape }}"
                    data-count="{{ tag_size }}"
                    onclick="showTagPosts(this.dataset.tag, this.dataset.name, this.dataset.count)">
              {{ tag }}
              <span class="tag-bubble-count">({{ tag_size }})</span>
            </button>
          {% endunless %}
        {% endfor %}
      </div>
    </section>

    <!-- æ¨™ç±¤å…§å®¹é¡¯ç¤ºå€åŸŸ -->
    <section id="tag-content-section" class="tag-content-section" style="display: none;">
      <div class="tag-content-header card">
        <div class="tag-content-title">
          <h2 id="current-tag-title" class="glow-gold"></h2>
          <span id="current-tag-count" class="tag-content-count"></span>
        </div>
        <button id="close-tag-content" class="btn outline">âœ• é—œé–‰</button>
      </div>
      
      <div id="tag-posts-container" class="tag-posts-grid">
        <!-- å‹•æ…‹ç”Ÿæˆçš„æ–‡ç« å…§å®¹ -->
      </div>
    </section>

    <!-- æ‰€æœ‰æ¨™ç±¤åˆ—è¡¨ -->
    <section class="all-tags-section">
      <h2 class="section-title glow-blue">ğŸ“‹ å®Œæ•´æ¨™ç±¤åˆ—è¡¨</h2>
      
      <div class="tags-list-container">
        {% for tag in all_tags %}
          {% unless tag == blank %}
            {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
            {% if tag_posts.size > 0 %}
              <div class="tag-list-item card" id="{{ tag | slugify }}">
                <div class="tag-list-header">
                  <h3 class="tag-list-title">
                    <span class="tag-list-icon">ğŸ·ï¸</span>
                    {{ tag }}
                  </h3>
                  <span class="tag-list-count">{{ tag_posts.size }} å€‹å¨è„…</span>
                </div>
                
                <div class="tag-posts-preview">
                  {% for article in tag_posts limit:3 %}
                    <article class="tag-post-preview">
                      <a href="{{ article.url | relative_url }}" class="tag-post-link">
                        <h4 class="tag-post-title">{{ article.title }}</h4>
                        <div class="tag-post-meta">
                          <span class="tag-post-date">{{ article.date | date: "%Y-%m-%d" }}</span>
                          {% if article.categories.size > 0 %}
                            <span class="tag-post-category">{{ article.categories | first }}</span>
                          {% endif %}
                        </div>
                      </a>
                    </article>
                  {% endfor %}
                  
                  {% if tag_posts.size > 3 %}
                    <div class="tag-more-posts">
                      <button class="btn outline" data-tag="{{ tag | slugify }}" data-name="{{ tag | escape }}" data-count="{{ tag_posts.size }}" onclick="showAllTagPosts(this.dataset.tag, this.dataset.name, this.dataset.count)">
                        æŸ¥çœ‹å…¨éƒ¨ {{ tag_posts.size }} å€‹å¨è„…
                      </button>
                    </div>
                  {% endif %}
                </div>
              </div>
            {% endif %}
          {% endunless %}
        {% endfor %}
      </div>
    </section>

    <div class="navigation-footer">
      <a href="{{ '/' | relative_url }}" class="btn outline">
        <span class="btn-icon">ğŸ </span>
        è¿”å›ç¸½éƒ¨
      </a>
      <a href="{{ '/categories.html' | relative_url }}" class="btn secondary">
        <span class="btn-icon">ğŸ“‚</span>
        æª¢è¦–åˆ†é¡
      </a>
      <a href="{{ '/posts.html' | relative_url }}" class="btn primary">
        <span class="btn-icon">ğŸ“š</span>
        æ‰€æœ‰å¨è„…
      </a>
    </div>
  </div>

  <!-- å³æ¬„ï¼šæ¨™ç±¤çµ±è¨ˆèˆ‡å·¥å…· -->
  <aside class="sidebar">
    <div class="card breathing-glow">
      <h3>ğŸ“Š æ¨™ç±¤çµ±è¨ˆ</h3>
      <div class="tags-stats-grid">
        <div class="stat-card">
          <div class="stat-icon glow-red">ğŸ·ï¸</div>
          <div class="stat-info">
            <div class="stat-number">{{ all_tags.size }}</div>
            <div class="stat-label">æ¼æ´æ¨™ç±¤</div>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon glow-blue">ğŸ“</div>
          <div class="stat-info">
            <div class="stat-number">{{ site.articles.size }}</div>
            <div class="stat-label">å¨è„…æƒ…å ±</div>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon glow-gold">ğŸ“ˆ</div>
          <div class="stat-info">
            <div class="stat-number">
              {% assign avg_tags = site.articles.size | divided_by: all_tags.size %}
              {{ avg_tags }}
            </div>
            <div class="stat-label">å¹³å‡æ¨™ç±¤æ•¸</div>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h3>ğŸ”¥ ç†±é–€æ¨™ç±¤</h3>
      <div class="hot-tags-list">
        {% assign tag_counts = '' | split: ',' %}
        {% for tag in all_tags %}
          {% unless tag == blank %}
            {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
            {% assign tag_info = tag | append: '|' | append: tag_posts.size %}
            {% assign tag_counts = tag_counts | push: tag_info %}
          {% endunless %}
        {% endfor %}
        
        {% assign sorted_tags = tag_counts | sort | reverse %}
        
        {% for tag_info in sorted_tags limit:8 %}
          {% assign tag_parts = tag_info | split: '|' %}
          {% assign tag = tag_parts[0] %}
          {% assign count = tag_parts[1] %}
          
          <div class="hot-tag-item">
            <button class="hot-tag-link" data-tag="{{ tag | slugify }}" data-name="{{ tag | escape }}" data-count="{{ count }}" onclick="showTagPosts(this.dataset.tag, this.dataset.name, this.dataset.count)">
              <span class="hot-tag-name">{{ tag }}</span>
              <span class="hot-tag-count">{{ count }}</span>
            </button>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="card">
      <h3>ğŸ” æ¨™ç±¤æœå°‹</h3>
      <div class="tag-search-tools">
        <input type="text" id="main-tag-search" placeholder="æœå°‹æ¨™ç±¤..." class="search-input">
        <div class="search-results" id="search-results"></div>
        
        <div class="search-tips">
          <h4>æœå°‹æŠ€å·§ï¼š</h4>
          <ul>
            <li>è¼¸å…¥é—œéµå­—å¿«é€Ÿå®šä½</li>
            <li>æ”¯æ´æ¨¡ç³Šæœå°‹</li>
            <li>æŒ‰æ¨™ç±¤æ•¸é‡æ’åº</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="card">
      <h3>ğŸ¯ å¿«é€Ÿè·³è½‰</h3>
      <div class="quick-jump">
        <a href="#tags-cloud-section" class="jump-link">
          <span class="jump-icon">ğŸŒ</span>
          <span class="jump-text">æ¨™ç±¤é›²</span>
        </a>
        <a href="#all-tags-section" class="jump-link">
          <span class="jump-icon">ğŸ“‹</span>
          <span class="jump-text">å®Œæ•´åˆ—è¡¨</span>
        </a>
      </div>
    </div>
  </aside>
</div>

<!-- éš±è—çš„æ–‡ç« æ•¸æ“š -->
<script type="application/json" id="articles-data">
{
  {% for tag in all_tags %}
    {% unless tag == blank %}
      {% assign tag_posts = site.articles | where_exp: "doc", "doc.tags contains tag" %}
      "{{ tag | slugify }}": {
        "name": "{{ tag }}",
        "count": {{ tag_posts.size }},
        "posts": [
          {% for article in tag_posts %}
            {
              "title": "{{ article.title | escape }}",
              "url": "{{ article.url | relative_url }}",
              "date": "{{ article.date | date: '%Y-%m-%d' }}",
              "excerpt": "{{ article.excerpt | strip_html | truncatewords: 20 | escape }}",
              "categories": [{% for cat in article.categories %}"{{ cat }}"{% unless forloop.last %},{% endunless %}{% endfor %}],
              "tags": [{% for t in article.tags %}"{{ t }}"{% unless forloop.last %},{% endunless %}{% endfor %}]
            }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      }{% unless forloop.last %},{% endunless %}
    {% endunless %}
  {% endfor %}
}
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // è¼‰å…¥æ–‡ç« æ•¸æ“š
  const articlesData = JSON.parse(document.getElementById('articles-data').textContent);
  
  // DOM å…ƒç´ 
  const tagContentSection = document.getElementById('tag-content-section');
  const currentTagTitle = document.getElementById('current-tag-title');
  const currentTagCount = document.getElementById('current-tag-count');
  const tagPostsContainer = document.getElementById('tag-posts-container');
  const closeTagContent = document.getElementById('close-tag-content');
  const tagSearch = document.getElementById('tag-search');
  const mainTagSearch = document.getElementById('main-tag-search');
  const searchResults = document.getElementById('search-results');

  // é¡¯ç¤ºæ¨™ç±¤æ–‡ç« 
  window.showTagPosts = function(tagSlug, tagName, count) {
    const tagData = articlesData[tagSlug];
    if (!tagData) return;

    currentTagTitle.textContent = `ğŸ·ï¸ ${tagName}`;
    currentTagCount.textContent = `${count} å€‹å¨è„…`;

    // ç”Ÿæˆæ–‡ç« åˆ—è¡¨
    tagPostsContainer.innerHTML = '';
    tagData.posts.forEach(post => {
      const postElement = createPostElement(post);
      tagPostsContainer.appendChild(postElement);
    });

    // é¡¯ç¤ºå€åŸŸ
    tagContentSection.style.display = 'block';
    tagContentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  };

  // é¡¯ç¤ºæ‰€æœ‰æ¨™ç±¤æ–‡ç« 
  window.showAllTagPosts = function(tagSlug, tagName, count) {
    showTagPosts(tagSlug, tagName, count);
  };

  // å‰µå»ºæ–‡ç« å…ƒç´ 
  function createPostElement(post) {
    const article = document.createElement('article');
    article.className = 'tag-post-card card';
    
    article.innerHTML = `
      <div class="tag-post-header">
        <h3 class="tag-post-title">
          <a href="${post.url}" class="glow-blue">${post.title}</a>
        </h3>
        <div class="tag-post-meta">
          <span class="post-date">ğŸ•’ ${post.date}</span>
          ${post.categories.length > 0 ? `<span class="post-category category">ğŸ“‚ ${post.categories[0]}</span>` : ''}
        </div>
      </div>
      <div class="tag-post-content">
        <p class="tag-post-excerpt">${post.excerpt}</p>
        <div class="tag-post-tags">
          ${post.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
          ${post.tags.length > 3 ? `<span class="tag-more">+${post.tags.length - 3}</span>` : ''}
        </div>
      </div>
      <div class="tag-post-footer">
        <a href="${post.url}" class="btn secondary">
          <span class="btn-icon">ğŸ‘ï¸</span>
          æª¢è¦–å¨è„…
        </a>
      </div>
    `;
    
    return article;
  }

  // é—œé–‰æ¨™ç±¤å…§å®¹
  closeTagContent.addEventListener('click', function() {
    tagContentSection.style.display = 'none';
  });

  // æ¨™ç±¤æœå°‹åŠŸèƒ½
  function filterTags(searchTerm) {
    const tagNavLinks = document.querySelectorAll('#tags-nav .tag-nav-link');
    const tagListItems = document.querySelectorAll('.tag-list-item');
    
    tagNavLinks.forEach(link => {
      const tagName = link.querySelector('.tag-name').textContent.toLowerCase();
      if (tagName.includes(searchTerm.toLowerCase())) {
        link.style.display = 'flex';
      } else {
        link.style.display = 'none';
      }
    });

    tagListItems.forEach(item => {
      const tagTitle = item.querySelector('.tag-list-title').textContent.toLowerCase();
      if (tagTitle.includes(searchTerm.toLowerCase())) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  }

  // æœå°‹äº‹ä»¶ç›£è½
  if (tagSearch) {
    tagSearch.addEventListener('input', function() {
      filterTags(this.value);
    });
  }

  if (mainTagSearch) {
    mainTagSearch.addEventListener('input', function() {
      filterTags(this.value);
      
      // é¡¯ç¤ºæœå°‹çµæœ
      const searchTerm = this.value.toLowerCase();
      if (searchTerm.length > 0) {
        const results = Object.keys(articlesData).filter(tagSlug => {
          return articlesData[tagSlug].name.toLowerCase().includes(searchTerm);
        }).slice(0, 5);

        searchResults.innerHTML = '';
        results.forEach(tagSlug => {
          const tagData = articlesData[tagSlug];
          const resultElement = document.createElement('div');
          resultElement.className = 'search-result-item';
          resultElement.innerHTML = `
            <button onclick="showTagPosts('${tagSlug}', '${tagData.name}', ${tagData.count})">
              ${tagData.name} (${tagData.count})
            </button>
          `;
          searchResults.appendChild(resultElement);
        });
        searchResults.style.display = 'block';
      } else {
        searchResults.style.display = 'none';
      }
    });
  }

  // æ¨™ç±¤å°èˆªæ»¾å‹•é«˜äº®
  const tagNavLinks = document.querySelectorAll('#tags-nav .tag-nav-link');
  const tagSections = document.querySelectorAll('.tag-list-item');

  function updateActiveTag() {
    let current = '';
    const scrollTop = window.pageYOffset + 150;

    tagSections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.offsetHeight;
      
      if (scrollTop >= sectionTop && scrollTop < sectionTop + sectionHeight) {
        current = section.getAttribute('id');
      }
    });

    tagNavLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === '#' + current) {
        link.classList.add('active');
      }
    });
  }

  // å¹³æ»‘æ»¾å‹•
  tagNavLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      
      const targetId = this.getAttribute('href').substring(1);
      const targetElement = document.getElementById(targetId);
      
      if (targetElement) {
        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - 100;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });

  // æ»¾å‹•äº‹ä»¶ç›£è½
  let ticking = false;
  function requestTick() {
    if (!ticking) {
      requestAnimationFrame(() => {
        updateActiveTag();
        ticking = false;
      });
      ticking = true;
    }
  }

  window.addEventListener('scroll', requestTick);
  updateActiveTag();
});
</script>
            <div class="stat-number">{{ site.posts.size }}</div>
          {% endif %}
          <div class="stat-label">ç¸½æ–‡ç« æ•¸</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{{ all_tags.size }}</div>
          <div class="stat-label">æ¨™ç±¤æ•¸é‡</div>
        </div>
      </div>
    </div>

    <!-- ç†±é–€æ¨™ç±¤ -->
    <div class="card">
      <h3>ğŸ·ï¸ ç†±é–€æ¨™ç±¤</h3>
      <div class="popular-tags">
        <!-- JavaScript å°‡å‹•æ…‹è¨ˆç®—ä¸¦é¡¯ç¤ºç†±é–€æ¨™ç±¤ -->
      </div>
    </div>

    <!-- å¿«é€Ÿå°èˆª -->
    <div class="card">
      <h3>ğŸ“ å¿«é€Ÿè·³è½‰</h3>
      <div class="nav-links">
        <a href="{{ '/categories.html' | relative_url }}" class="nav-link">ğŸ“‚ åˆ†é¡ç€è¦½</a>
        <a href="{{ '/posts.html' | relative_url }}" class="nav-link">ğŸ“° å…¨éƒ¨æ–‡ç« </a>
        <a href="{{ '/search.html' | relative_url }}" class="nav-link">ğŸ” æœå°‹æ–‡ç« </a>
      </div>
    </div>
  </aside>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // æ¨™ç±¤é é¢çš„ TOC ç”Ÿæˆå’Œçµ±è¨ˆæ•¸æ“š
  const tocContainer = document.getElementById("toc");
  if (tocContainer) {
    const sections = document.querySelectorAll('h1[id], h2[id], h3[id]');
    const tocLinks = [];
    
    sections.forEach(section => {
      const link = document.createElement('a');
      link.href = '#' + section.id;
      link.textContent = section.textContent;
      link.className = 'toc-link';
      
      // æ ¹æ“šæ¨™é¡Œå±¤ç´šè¨­ç½®æ¨£å¼
      if (section.tagName === 'H1') {
        link.style.fontWeight = 'bold';
      } else if (section.tagName === 'H2') {
        link.style.paddingLeft = '1rem';
      } else if (section.tagName === 'H3') {
        link.style.paddingLeft = '2rem';
        link.style.fontSize = '0.9em';
        link.style.opacity = '0.8';
      }
      
      tocContainer.appendChild(link);
      tocLinks.push(link);
    });

    // TOC é»æ“Šäº‹ä»¶å’Œé«˜äº®é‚è¼¯
    let isScrolling = false;
    
    tocLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        isScrolling = true;
        
        // ç§»é™¤æ‰€æœ‰ active ç‹€æ…‹
        tocLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - 100;
          window.scrollTo({
            top: targetPosition,
            behavior: "smooth"
          });
          history.replaceState(null, "", link.getAttribute('href'));
          
          setTimeout(() => {
            isScrolling = false;
          }, 1500);
        }
      });
    });

    function updateActiveTOC() {
      if (isScrolling) return;
      
      let currentActive = null;
      const scrollTop = window.pageYOffset + 120;
      
      // å¾å¾Œå¾€å‰æª¢æŸ¥ï¼Œæ‰¾åˆ°ç•¶å‰æ‡‰è©²é«˜äº®çš„å€åŸŸ
      for (let i = sections.length - 1; i >= 0; i--) {
        const section = sections[i];
        if (section.offsetTop <= scrollTop) {
          currentActive = tocLinks[i];
          break;
        }
      }
      
      // å¦‚æœæ²’æœ‰æ‰¾åˆ°ï¼Œæ ¹æ“šæ»¾å‹•ä½ç½®æ±ºå®š
      if (!currentActive) {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        
        // å¦‚æœæ¥è¿‘é é¢åº•éƒ¨ï¼Œé«˜äº®æœ€å¾Œä¸€å€‹
        if (scrollTop + windowHeight >= documentHeight - 200) {
          currentActive = tocLinks[tocLinks.length - 1];
        } else {
          // å¦å‰‡é«˜äº®ç¬¬ä¸€å€‹
          currentActive = tocLinks[0];
        }
      }
      
      // æ›´æ–°é«˜äº®
      tocLinks.forEach(link => link.classList.remove('active'));
      if (currentActive) {
        currentActive.classList.add('active');
        
        // ç¢ºä¿æ´»å‹•é …ç›®åœ¨TOCä¸­å¯è¦‹
        const tocContainer = document.getElementById('toc');
        if (tocContainer && currentActive) {
          const containerRect = tocContainer.getBoundingClientRect();
          const activeRect = currentActive.getBoundingClientRect();
          
          if (activeRect.bottom > containerRect.bottom || activeRect.top < containerRect.top) {
            currentActive.scrollIntoView({ 
              behavior: 'smooth', 
              block: 'center',
              inline: 'nearest' 
            });
          }
        }
      }
    }
    
    let ticking = false;
    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateActiveTOC();
          ticking = false;
        });
        ticking = true;
      }
    }
    
    window.addEventListener('scroll', requestTick);
    updateActiveTOC();
  }

  // çµ±è¨ˆæ•¸æ“šæ›´æ–° - å¾å¯¦éš›æ–‡ç« æ•¸æ“šè¨ˆç®—
  const allArticles = document.querySelectorAll('.article-card');
  const totalArticles = allArticles.length;
  
  const tagCount = new Map();
  allArticles.forEach(article => {
    const tagsContainer = article.querySelector('.article-tags');
    if (tagsContainer) {
      const tags = tagsContainer.querySelectorAll('.tag');
      tags.forEach(tagElement => {
        const tag = tagElement.textContent.trim();
        tagCount.set(tag, (tagCount.get(tag) || 0) + 1);
      });
    }
  });
  
  // æ›´æ–°å³æ¬„çµ±è¨ˆæ•¸æ“š
  const statsElement = document.querySelector('.stats-grid .stat-number');
  if (statsElement) {
    statsElement.textContent = totalArticles;
  }
  
  const tagsStatElement = document.querySelectorAll('.stats-grid .stat-number')[1];
  if (tagsStatElement) {
    tagsStatElement.textContent = tagCount.size;
  }
  
  // æ›´æ–°ç†±é–€æ¨™ç±¤
  const popularTagsContainer = document.querySelector('.popular-tags');
  if (popularTagsContainer) {
    // æ¸…ç©ºç¾æœ‰å…§å®¹
    popularTagsContainer.innerHTML = '';
    
    // å°‡æ¨™ç±¤æŒ‰ä½¿ç”¨æ¬¡æ•¸æ’åº
    const sortedTags = Array.from(tagCount.entries())
      .sort((a, b) => b[1] - a[1])
      .slice(0, 8); // åªé¡¯ç¤ºå‰8å€‹
    
    sortedTags.forEach(([tag, count]) => {
      const tagLink = document.createElement('a');
      tagLink.href = '#' + tag.toLowerCase().replace(/\s+/g, '-');
      tagLink.className = 'tag-link';
      tagLink.innerHTML = `${tag} <span class="count">(${count})</span>`;
      popularTagsContainer.appendChild(tagLink);
    });
  }
});

// TOC æ”¶èµ·/å±•é–‹åŠŸèƒ½ (å…¨åŸŸå‡½å¼)
function toggleTOC() {
  const toc = document.getElementById('post-toc');
  const icon = document.getElementById('toc-icon');
  
  if (!toc || !icon) return;
  
  if (toc.classList.contains('collapsed')) {
    toc.classList.remove('collapsed');
    icon.textContent = 'â˜°';
  } else {
    toc.classList.add('collapsed');
    icon.textContent = 'â–¶';
  }
}

// éŸ¿æ‡‰å¼æª¢æŸ¥
function checkScreenWidth() {
  const toc = document.getElementById('post-toc');
  if (window.innerWidth < 1024 && toc) {
    toc.classList.add('collapsed');
    const icon = document.getElementById('toc-icon');
    if (icon) icon.textContent = 'â–¶';
  }
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  checkScreenWidth();
  window.addEventListener('resize', checkScreenWidth);
  
  // æ¨™ç±¤å°èˆªé»æ“Šå¹³æ»‘æ»¾å‹•
  document.querySelectorAll('.tag-nav-link').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
});
</script>